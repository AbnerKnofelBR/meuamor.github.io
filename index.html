<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Temporizador — Pedido</title>
<style>
:root{--bg:#040318;--accent:#ff5b8a;--muted:#e6eefc;--card:rgba(255,255,255,0.03)}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--muted)}
.container{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:22px;box-sizing:border-box}
h1{font-size:20px;margin:10px 0}
.timer-box{margin-top:18px;background:var(--card);padding:16px;border-radius:12px;width:100%;max-width:420px;text-align:center}
.time-row{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:10px}
.time-item{width:70px;height:70px;border-radius:8px;background:rgba(255,255,255,0.02);display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:800}
.btn{margin-top:14px;padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#fff}
.small{font-size:13px;opacity:0.9;margin-top:8px}
</style>
</head>
<body>
<div class="container">
  <h1>Contagem regressiva — Pedido</h1>
  <p class="small">O temporizador contabiliza 3 meses desde que você iniciou o temporizador (armazenado no navegador).</p>

  <div class="timer-box">
    <div class="time-row">
      <div class="time-item"><div id="mVal">0</div><div style="font-size:12px">Meses</div></div>
      <div class="time-item"><div id="dVal">0</div><div style="font-size:12px">Dias</div></div>
      <div class="time-item"><div id="hVal">00</div><div style="font-size:12px">Horas</div></div>
      <div class="time-item"><div id="minVal">00</div><div style="font-size:12px">Min</div></div>
      <div class="time-item"><div id="sVal">00</div><div style="font-size:12px">Seg</div></div>
    </div>

    <button id="resetBtn" class="btn">Definir agora como início</button>
    <div class="small">Obrigado por acreditar nessa história ❤️</div>
  </div>
</div>

<script>
function ensureStart(){
  let stored = localStorage.getItem('proposalStart');
  if(!stored){ const now=Date.now(); localStorage.setItem('proposalStart', String(now)); stored = String(now); }
  return new Date(parseInt(stored,10));
}

let interval = null;
function startTimer(){
  const start = ensureStart();
  const end = new Date(start.getFullYear(), start.getMonth()+3, start.getDate(), start.getHours(), start.getMinutes(), start.getSeconds());
  if(interval) clearInterval(interval);
  function tick(){
    const now = new Date();
    let diff = Math.floor((end - now)/1000);
    if(diff < 0) diff = 0;
    const monthsLeft = Math.floor(diff / (30*24*3600));
    const daysLeft = Math.floor(diff / 86400);
    let rem = diff % 86400;
    const hours = Math.floor(rem/3600); rem%=3600;
    const mins = Math.floor(rem/60); const secs = rem%60;
    document.getElementById('mVal').textContent = monthsLeft;
    document.getElementById('dVal').textContent = daysLeft;
    document.getElementById('hVal').textContent = String(hours).padStart(2,'0');
    document.getElementById('minVal').textContent = String(mins).padStart(2,'0');
    document.getElementById('sVal').textContent = String(secs).padStart(2,'0');
    if(diff === 0){ clearInterval(interval); alert('Os 3 meses terminaram — hora do pedido! ❤️'); }
  }
  tick();
  interval = setInterval(tick,1000);
}

startTimer();

document.getElementById('resetBtn').addEventListener('click', ()=>{
  localStorage.setItem('proposalStart', String(Date.now()));
  if(interval) clearInterval(interval);
  startTimer();
});
</script>
</body>
</html>
